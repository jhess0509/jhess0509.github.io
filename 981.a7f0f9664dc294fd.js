(self.webpackChunkazimuth=self.webpackChunkazimuth||[]).push([[981],{5981:(U,R,w)=>{"use strict";w.r(R),w.d(R,{MapsModule:()=>mt,routes:()=>q});var T=w(4755),Z=w(6868),l=w(2223),g=w(1135),v=w(9751),A=(w(7579),w(9841),w(3900));w(5698),w(4004),w(2722);const n=["*"];class o{_clearListeners(){for(const _ of this._listeners)_.remove();this._listeners=[]}constructor(_){this._ngZone=_,this._pending=[],this._listeners=[],this._targetStream=new g.X(void 0)}getLazyEmitter(_){return this._targetStream.pipe((0,A.w)(s=>{const d=new v.y(y=>{if(!s)return void this._pending.push({observable:d,observer:y});const b=s.addListener(_,O=>{this._ngZone.run(()=>y.next(O))});if(b)return this._listeners.push(b),()=>b.remove();y.complete()});return d}))}setTarget(_){const s=this._targetStream.value;_!==s&&(s&&(this._clearListeners(),this._pending=[]),this._targetStream.next(_),this._pending.forEach(d=>d.observable.subscribe(d.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const a={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},r="500px",h="500px";let u=(()=>{class c{set center(s){this._center=s}set zoom(s){this._zoom=s}set options(s){this._options=s||a}constructor(s,d,y){if(this._elementRef=s,this._ngZone=d,this._eventManager=new o((0,l.f3M)(l.R0b)),this.height=r,this.width=h,this._options=a,this.mapInitialized=new l.vpe,this.authFailure=new l.vpe,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=(0,T.NF)(y),this._isBrowser){const b=window;this._existingAuthFailureCallback=b.gm_authFailure,b.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(s){(s.height||s.width)&&this._setSize();const d=this.googleMap;d&&(s.options&&d.setOptions(this._combineOptions()),s.center&&this._center&&d.setCenter(this._center),s.zoom&&null!=this._zoom&&d.setZoom(this._zoom),s.mapTypeId&&this.mapTypeId&&d.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(s,d){this._assertInitialized(),this.googleMap.fitBounds(s,d)}panBy(s,d){this._assertInitialized(),this.googleMap.panBy(s,d)}panTo(s){this._assertInitialized(),this.googleMap.panTo(s)}panToBounds(s,d){this._assertInitialized(),this.googleMap.panToBounds(s,d)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const s=this._mapEl.style;s.height=null===this.height?"":f(this.height)||r,s.width=null===this.width?"":f(this.width)||h}}_combineOptions(){const s=this._options||{};return{...s,center:this._center||s.center||a.center,zoom:this._zoom??s.zoom??a.zoom,mapTypeId:this.mapTypeId||s.mapTypeId||a.mapTypeId}}_assertInitialized(){}}return c.\u0275fac=function(s){return new(s||c)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.Lbi))},c.\u0275cmp=l.Xpm({type:c,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[l.TTD],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"map-container"]],template:function(s,d){1&s&&(l.F$t(),l._UZ(0,"div",0),l.Hsn(1))},encapsulation:2,changeDetection:0}),c})();const p=/([A-Za-z%]+)$/;function f(c){return null==c?"":p.test(c)?c:`${c}px`}const k={position:{lat:37.421995,lng:-122.084092}};let B=(()=>{class c{set title(s){this._title=s}set position(s){this._position=s}set label(s){this._label=s}set clickable(s){this._clickable=s}set options(s){this._options=s}set icon(s){this._icon=s}set visible(s){this._visible=s}constructor(s,d){this._googleMap=s,this._ngZone=d,this._eventManager=new o((0,l.f3M)(l.R0b)),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(s){const{marker:d,_title:y,_position:b,_label:O,_clickable:x,_icon:N,_visible:F}=this;d&&(s.options&&d.setOptions(this._combineOptions()),s.title&&void 0!==y&&d.setTitle(y),s.position&&b&&d.setPosition(b),s.label&&void 0!==O&&d.setLabel(O),s.clickable&&void 0!==x&&d.setClickable(x),s.icon&&N&&d.setIcon(N),s.visible&&void 0!==F&&d.setVisible(F))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){const s=this._options||k;return{...s,title:this._title||s.title,position:this._position||s.position,label:this._label||s.label,clickable:this._clickable??s.clickable,map:this._googleMap.googleMap,icon:this._icon||s.icon,visible:this._visible??s.visible}}_assertInitialized(){}}return c.\u0275fac=function(s){return new(s||c)(l.Y36(u),l.Y36(l.R0b))},c.\u0275dir=l.lG2({type:c,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[l.TTD]}),c})(),dt=(()=>{class c{}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})();var pt=w(9212),W=w(3090);function ft(c,_){if(1&c&&l._UZ(0,"map-marker",10),2&c){const s=_.$implicit,d=l.oxw();l.Q6J("position",s)("options",d.markerOptions)}}let gt=(()=>{class c{constructor(){this.center={lat:45.42153,lng:-75.697193},this.zoom=7,this.markerOptions={draggable:!1},this.markerPositions=[{lat:45.42153,lng:-75.697193}]}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["az-google-maps"]],decls:12,vars:3,consts:[[1,"row","googlemap","mbm-20"],[1,"col"],["widget","",1,"card"],[1,"card-header"],[1,"widget-controls"],["data-widgster","close","href","#",1,"transition"],[1,"fa","fa-times"],[1,"card-body","widget-body"],[3,"center","zoom"],[3,"position","options",4,"ngFor","ngForOf"],[3,"position","options"]],template:function(s,d){1&s&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),l._uU(5,"Google Maps"),l.qZA(),l.TgZ(6,"div",4)(7,"a",5),l._UZ(8,"i",6),l.qZA()()(),l.TgZ(9,"div",7)(10,"google-map",8),l.YNc(11,ft,1,2,"map-marker",9),l.qZA()()()()()),2&s&&(l.xp6(10),l.Q6J("center",d.center)("zoom",d.zoom),l.xp6(1),l.Q6J("ngForOf",d.markerPositions))},dependencies:[T.sg,W.$,u,B],styles:[".googlemap .card .card-body{padding:0;height:calc(100vh - 260px)}.googlemap .card .card-body .map-container{width:100%!important;height:100%!important}\n"],encapsulation:2}),c})();w(4212);let _t=(()=>{class c{ngAfterViewInit(){let s=document.getElementById("leaflet-map");L.Icon.Default.imagePath="../assets/img/vendor/leaflet";var d=L.map(s).setView([51.505,-.09],13);L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(d),L.marker([51.5,-.09]).addTo(d).bindPopup("A pretty CSS3 popup.<br> Easily customizable.").openPopup()}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["az-leaflet-maps"]],decls:11,vars:0,consts:[[1,"row","leafletmap","mbm-20"],[1,"col"],["widget","",1,"card"],[1,"card-header"],[1,"widget-controls"],["data-widgster","close","href","#",1,"transition"],[1,"fa","fa-times"],[1,"card-body","widget-body"],["id","leaflet-map"]],template:function(s,d){1&s&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),l._uU(5,"Leaflet Maps"),l.qZA(),l.TgZ(6,"div",4)(7,"a",5),l._UZ(8,"i",6),l.qZA()()(),l.TgZ(9,"div",7),l._UZ(10,"div",8),l.qZA()()()())},dependencies:[W.$],styles:['body:after{content:\'{"main-color":"#242D3A","default-color":"#fff","dark-color":"#000","primary-color":"#024a88","success-color":"#2d922d","warning-color":"#f79a17","danger-color":"#bf1725","info-color":"#248dad","sidebar-bg-color":"#344154","gray":"#555","gray-light":"#ccc"}\';display:none}.leafletmap .card .card-body{padding:0}#leaflet-map{width:100%;height:calc(100vh - 260px)}.leaflet-popup-content{color:#242d3a}\n'],encapsulation:2}),c})();var H=w(7777);let V=(()=>{class c{constructor(s){this._appConfig=s,this.bubbles=[{city:"Tokyo",country:"Japan",population:"37.2 million",rate:"0.6%",link:"https://en.wikipedia.org/wiki/Tokyo",latitude:35.69,longitude:139.69,radius:7,fillKey:"danger"},{city:"Delhi",country:"India",population:"25 million",rate:"2.5%",link:"https://en.wikipedia.org/wiki/Delhi",latitude:28.7,longitude:77.1,radius:7,fillKey:"danger"},{city:"Shanghai",country:"China",population:"23 million",rate:"2.9%",link:"https://en.wikipedia.org/wiki/Shanghai",latitude:31.23,longitude:121.47,radius:7,fillKey:"danger"},{city:"Mexico City",country:"Mexico",population:"Approx 21 million",rate:"1.5%",link:"https://en.wikipedia.org/wiki/Mexico_City",latitude:19.43,longitude:-99.13,radius:7,fillKey:"danger"},{city:"Mumbai",country:"India",population:"Approx 21 million",rate:"2.5%",link:"https://en.wikipedia.org/wiki/Mumbai",latitude:19.07,longitude:72.88,radius:7,fillKey:"danger"},{city:"Sao Paulo",country:"Brazil",population:"Approx 21 million",rate:"1.2%",link:"https://en.wikipedia.org/wiki/S%C3%A3o_Paulo",latitude:-23.55,longitude:-46.63,radius:7,fillKey:"danger"},{city:"Osaka",country:"Japan",population:"Approx 20 million",rate:"0.6%",link:"https://en.wikipedia.org/wiki/Osaka",latitude:34.69,longitude:135.5,radius:7,fillKey:"danger"},{city:"Beijing",country:"China",population:"Approx 20 million",rate:"2.9%",link:"https://en.wikipedia.org/wiki/Beijing",latitude:39.9,longitude:116.41,radius:7,fillKey:"danger"},{city:"New York",country:"United States of America",population:"Approx 18.5 million",rate:"1.1%",link:"https://en.wikipedia.org/wiki/New_York",latitude:40.71,longitude:-74.01,radius:7,fillKey:"danger"},{city:"Cairo",country:"Egypt",population:"Approx 18.5 million",rate:"2%",link:"https://en.wikipedia.org/wiki/Cairo",latitude:30.04,longitude:31.24,radius:7,fillKey:"danger"}],this.arcs=[{origin:"CA",destination:"TX"},{origin:"OR",destination:"TX"},{origin:"NY",destination:"TX"},{origin:{latitude:40.639722,longitude:-73.778889},destination:{latitude:37.618889,longitude:-122.375}},{origin:{latitude:30.194444,longitude:-97.67},destination:{latitude:25.793333,longitude:-80.290556},options:{strokeWidth:2,strokeColor:this._appConfig.config.colors.danger,greatArc:!0}},{origin:{latitude:39.861667,longitude:-104.673056},destination:{latitude:35.877778,longitude:-78.7875}}],this._appConfig=s}getBubbles(){return this.bubbles}getArcs(){return this.arcs}}return c.\u0275fac=function(s){return new(s||c)(l.LFG(H.X))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const q=[{path:"",redirectTo:"googlemaps",pathMatch:"full"},{path:"googlemaps",component:gt,data:{breadcrumb:"Google"}},{path:"leafletmaps",component:_t,data:{breadcrumb:"Leaflet"}},{path:"vectormaps",component:(()=>{class c{constructor(s,d){this._vectorMapsService=s,this._appConfig=d,this.bubbles=this._vectorMapsService.getBubbles(),this.arcs=this._vectorMapsService.getArcs(),this.config=this._appConfig.config,this.configFn=this._appConfig}ngAfterViewInit(){var s=new Datamap({element:document.getElementById("bubble-map"),scope:"world",responsive:!0,fills:{defaultFill:this.configFn.rgba(this.config.colors.gray,.4),danger:this.config.colors.danger},geographyConfig:{borderWidth:.7,borderColor:this.config.colors.default,highlightFillColor:this.config.colors.sidebarBgColor,highlightBorderColor:this.config.colors.default,highlightBorderOpacity:.8,highlightBorderWidth:1}});s.bubbles(this.bubbles,{popupTemplate:function(y,b){return"<div class='hoverinfo'><b>"+b.city+"</b><br/>Country: <i>"+b.country+"</i>,<br/>Population: <i>"+b.population+"</i>,<br/> Growth rate (2010-2015): <i>"+b.rate+"</i>,<br/>More info: <u>"+decodeURI(b.link)+"</u></div>"},fillOpacity:.7,highlightFillColor:this.config.colors.main,highlightBorderColor:this.configFn.rgba(this.config.colors.default,.7),highlightFillOpacity:.8}),d3.selectAll(".datamaps-bubble").on("click",function(y){window.open(y.link)}),jQuery("#bubble-map-widget").on("fullscreened.widgster",function(){s.resize()}).on("restored.widgster",function(){s.resize()});var d=new Datamap({element:document.getElementById("arcs-map"),scope:"usa",responsive:!0,fills:{defaultFill:this.configFn.rgba(this.config.colors.gray,.4),info:this.config.colors.info},data:{TX:{fillKey:"info"},FL:{fillKey:"info"},NC:{fillKey:"info"},CA:{fillKey:"info"},NY:{fillKey:"info"},CO:{fillKey:"info"}},geographyConfig:{borderWidth:.7,borderColor:this.config.colors.default,highlightFillColor:this.config.colors.sidebarBgColor,highlightBorderColor:this.config.colors.default,highlightBorderOpacity:.8,highlightBorderWidth:1}});d.arc(this.arcs,{strokeWidth:1,arcSharpness:1.4}),jQuery("#arcs-map-widget").on("fullscreened.widgster",function(){d.resize()}).on("restored.widgster",function(){d.resize()}),window.addEventListener("resize",function(){s.resize(),d.resize()})}changeBg(s){this.bgColor=s}}return c.\u0275fac=function(s){return new(s||c)(l.Y36(V),l.Y36(H.X))},c.\u0275cmp=l.Xpm({type:c,selectors:[["az-vector-maps"]],features:[l._Bn([V])],decls:64,vars:3,consts:[[1,"row","bubblemap","bottom-30"],[1,"col"],["id","bubble-map-widget","widget",""],[1,"card-header"],[1,"widget-controls"],["href","#","data-toggle","dropdown",1,"dropdown-toggle","transition","setting"],[1,"fa","fa-gear"],[1,"dropdown-menu"],["title","Default BG","href","javascript:void(0)",3,"click"],["title","Primary BG","href","javascript:void(0)",3,"click"],["title","Success BG","href","javascript:void(0)",3,"click"],["title","Info BG","href","javascript:void(0)",3,"click"],["title","Warning BG","href","javascript:void(0)",3,"click"],["title","Danger BG","href","javascript:void(0)",3,"click"],["data-widgster","expand","href","#",1,"transition"],[1,"fa","fa-chevron-down"],["data-widgster","collapse","href","#",1,"transition"],[1,"fa","fa-chevron-up"],["data-widgster","fullscreen","href","#",1,"transition"],[1,"fa","fa-expand"],["data-widgster","restore","href","#",1,"transition"],[1,"fa","fa-compress"],["data-widgster","close","href","#",1,"transition"],[1,"fa","fa-times"],[1,"card-body","widget-body"],[1,"text-center"],[1,"hidden-md-down"],["id","bubble-map"],[1,"row","arcsmap"],["id","arcs-map-widget","widget","",1,"card"],["id","arcs-map"]],template:function(s,d){1&s&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),l._uU(5,"Bubbles Map"),l.qZA(),l.TgZ(6,"div",4)(7,"a",5),l._UZ(8,"i",6),l.qZA(),l.TgZ(9,"ul",7)(10,"li")(11,"a",8),l.NdJ("click",function(){return d.changeBg("")}),l._uU(12,"Default BG"),l.qZA()(),l.TgZ(13,"li")(14,"a",9),l.NdJ("click",function(){return d.changeBg("primary")}),l._uU(15,"Primary BG"),l.qZA()(),l.TgZ(16,"li")(17,"a",10),l.NdJ("click",function(){return d.changeBg("success")}),l._uU(18,"Success BG"),l.qZA()(),l.TgZ(19,"li")(20,"a",11),l.NdJ("click",function(){return d.changeBg("info")}),l._uU(21,"Info BG"),l.qZA()(),l.TgZ(22,"li")(23,"a",12),l.NdJ("click",function(){return d.changeBg("warning")}),l._uU(24,"Warning BG"),l.qZA()(),l.TgZ(25,"li")(26,"a",13),l.NdJ("click",function(){return d.changeBg("danger")}),l._uU(27,"Danger BG"),l.qZA()()(),l.TgZ(28,"a",14),l._UZ(29,"i",15),l.qZA(),l.TgZ(30,"a",16),l._UZ(31,"i",17),l.qZA(),l.TgZ(32,"a",18),l._UZ(33,"i",19),l.qZA(),l.TgZ(34,"a",20),l._UZ(35,"i",21),l.qZA(),l.TgZ(36,"a",22),l._UZ(37,"i",23),l.qZA()()(),l.TgZ(38,"div",24)(39,"h3",25),l._uU(40," Top 10 most populated cities in the world (2014) "),l._UZ(41,"br"),l.TgZ(42,"span",26),l._uU(43,"(Source: United Nations Statistics Department)"),l.qZA()(),l._UZ(44,"div",27),l.qZA()()()(),l.TgZ(45,"div",28)(46,"div",1)(47,"div",29)(48,"div",3)(49,"span"),l._uU(50,"Arcs Map"),l.qZA(),l.TgZ(51,"div",4)(52,"a",14),l._UZ(53,"i",15),l.qZA(),l.TgZ(54,"a",16),l._UZ(55,"i",17),l.qZA(),l.TgZ(56,"a",18),l._UZ(57,"i",19),l.qZA(),l.TgZ(58,"a",20),l._UZ(59,"i",21),l.qZA(),l.TgZ(60,"a",22),l._UZ(61,"i",23),l.qZA()()(),l.TgZ(62,"div",24),l._UZ(63,"div",30),l.qZA()()()()),2&s&&(l.xp6(2),l.Gre("card card-",d.bgColor,""))},dependencies:[W.$],styles:['body:after{content:\'{"main-color":"#242D3A","default-color":"#fff","dark-color":"#000","primary-color":"#024a88","success-color":"#2d922d","warning-color":"#f79a17","danger-color":"#bf1725","info-color":"#248dad","sidebar-bg-color":"#344154","gray":"#555","gray-light":"#ccc"}\';display:none}.bubblemap h3{position:absolute;left:0;right:0;font-weight:300}.bubblemap h3 span{font-size:16px;font-style:italic;letter-spacing:.02em}.bubblemap .datamaps-bubble{cursor:pointer}.hoverinfo{background-color:#242d3ab3!important;color:#fff;font-weight:100;letter-spacing:.02em;padding:6px 10px!important;box-shadow:1px 1px 5px #fff!important;border:1px solid #fff!important}.hoverinfo b{font-size:16px;text-decoration:underline}@media (max-width: 543px){#bubble-map{margin-top:60px}}@media (min-width: 544px) and (max-width: 767px){#bubble-map{margin-top:40px}}@media (min-width: 768px) and (max-width: 991px){#bubble-map{margin-top:40px}}@media (min-width: 992px) and (max-width: 1199px){#bubble-map{margin-top:20px}}\n'],encapsulation:2}),c})(),data:{breadcrumb:"Vector"}}];let mt=(()=>{class c{}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[T.ez,pt.o,Z.Bz.forChild(q),dt]}),c})()},4212:(U,R,w)=>{var T=w(8407);U.exports=function Z(g){(g=g||{defaultStyle:!0}).defaultStyle&&(T.Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/images",function l(){document.documentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0";var g=document.createElement("link");g.setAttribute("rel","stylesheet"),g.setAttribute("href","//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"),document.body.appendChild(g)}());var v=document.createElement("div");return v.setAttribute("style","width:100%;height:100%;position:inherit;"),document.body.appendChild(v),T.map(v)}},8407:(U,R,w)=>{var T,Z;!function(l,g,v){var t,e,I=l.L,i={version:"0.7.7"};"object"==typeof U.exports?U.exports=i:(Z="function"==typeof(T=i)?T.call(R,w,R,U):T)!==v&&(U.exports=Z),i.noConflict=function(){return l.L=I,this},l.L=i,i.Util={extend:function(t){var n,o,a,r,e=Array.prototype.slice.call(arguments,1);for(o=0,a=e.length;o<a;o++)for(n in r=e[o]||{})r.hasOwnProperty(n)&&(t[n]=r[n]);return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:(t=0,e="_leaflet_id",function(n){return n[e]=n[e]||++t,n[e]}),invokeEach:function(t,e,n){var o,a;if("object"==typeof t){for(o in a=Array.prototype.slice.call(arguments,3),t)e.apply(n,[o,t[o]].concat(a));return!0}return!1},limitExecByInterval:function(t,e,n){var o,a;return function r(){var h=arguments;o?a=!0:(o=!0,setTimeout(function(){o=!1,a&&(r.apply(n,h),a=!1)},e),t.apply(n,h))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return i.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=i.extend({},t.options,e),t.options},getParamString:function(t,e,n){var o=[];for(var a in t)o.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(n,o){var a=e[o];if(a===v)throw new Error("No value provided for variable "+n);return"function"==typeof a&&(a=a(e)),a})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(r){var h,u,p=["webkit","moz","o","ms"];for(h=0;h<p.length&&!u;h++)u=l[p[h]+r];return u}var e=0;function n(r){var h=+new Date,u=Math.max(0,16-(h-e));return e=h+u,l.setTimeout(r,u)}var o=l.requestAnimationFrame||t("RequestAnimationFrame")||n,a=l.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(r){l.clearTimeout(r)};i.Util.requestAnimFrame=function(r,h,u,p){if(r=i.bind(r,h),!u||o!==n)return o.call(l,r,p);r()},i.Util.cancelAnimFrame=function(r){r&&a.call(l,r)}}(),i.extend=i.Util.extend,i.bind=i.Util.bind,i.stamp=i.Util.stamp,i.setOptions=i.Util.setOptions,i.Class=function(){},i.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var o=new n;for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&(e[a]=this[a]);t.statics&&(i.extend(e,t.statics),delete t.statics),t.includes&&(i.Util.extend.apply(null,[o].concat(t.includes)),delete t.includes),t.options&&o.options&&(t.options=i.extend({},o.options,t.options)),i.extend(o,t),o._initHooks=[];var r=this;return e.__super__=r.prototype,o.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var h=0,u=o._initHooks.length;h<u;h++)o._initHooks[h].call(this)}},e},i.Class.include=function(t){i.extend(this.prototype,t)},i.Class.mergeOptions=function(t){i.extend(this.prototype.options,t)},i.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var n,A="_leaflet_events";i.Mixin={},i.Mixin.Events={addEventListener:function(t,e,n){if(i.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var r,h,u,p,f,m,M,o=this[A]=this[A]||{},a=n&&n!==this&&i.stamp(n);for(r=0,h=(t=i.Util.splitWords(t)).length;r<h;r++)u={action:e,context:n||this},p=t[r],a?(m=(f=p+"_idx")+"_len",(M=o[f]=o[f]||{})[a]||(M[a]=[],o[m]=(o[m]||0)+1),M[a].push(u)):(o[p]=o[p]||[],o[p].push(u));return this},hasEventListeners:function(t){var e=this[A];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[A])return this;if(!t)return this.clearAllEventListeners();if(i.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var r,h,u,p,f,m,M,P,o=this[A],a=n&&n!==this&&i.stamp(n);for(r=0,h=(t=i.Util.splitWords(t)).length;r<h;r++)if(M=(m=(u=t[r])+"_idx")+"_len",P=o[m],e){if(p=a&&P?P[a]:o[u]){for(f=p.length-1;f>=0;f--)p[f].action===e&&(!n||p[f].context===n)&&(p.splice(f,1)[0].action=i.Util.falseFn);n&&P&&0===p.length&&(delete P[a],o[M]--)}}else delete o[u],delete o[m],delete o[M];return this},clearAllEventListeners:function(){return delete this[A],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var a,r,h,u,p,n=i.Util.extend({},e,{type:t,target:this}),o=this[A];if(o[t])for(r=0,h=(a=o[t].slice()).length;r<h;r++)a[r].action.call(a[r].context,n);for(p in u=o[t+"_idx"])if(a=u[p].slice())for(r=0,h=a.length;r<h;r++)a[r].action.call(a[r].context,n);return this},addOneTimeEventListener:function(t,e,n){if(i.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var o=i.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,o,n)},this);return this.addEventListener(t,e,n).addEventListener(t,o,n)}},i.Mixin.Events.on=i.Mixin.Events.addEventListener,i.Mixin.Events.off=i.Mixin.Events.removeEventListener,i.Mixin.Events.once=i.Mixin.Events.addOneTimeEventListener,i.Mixin.Events.fire=i.Mixin.Events.fireEvent,function(){var t="ActiveXObject"in l,e=t&&!g.addEventListener,n=navigator.userAgent.toLowerCase(),o=-1!==n.indexOf("webkit"),a=-1!==n.indexOf("chrome"),r=-1!==n.indexOf("phantom"),h=-1!==n.indexOf("android"),u=-1!==n.search("android [23]"),p=-1!==n.indexOf("gecko"),f=typeof orientation!=v+"",m=!l.PointerEvent&&l.MSPointerEvent,M=l.PointerEvent&&l.navigator.pointerEnabled||m,P="devicePixelRatio"in l&&l.devicePixelRatio>1||"matchMedia"in l&&l.matchMedia("(min-resolution:144dpi)")&&l.matchMedia("(min-resolution:144dpi)").matches,C=g.documentElement,D=t&&"transition"in C.style,z="WebKitCSSMatrix"in l&&"m11"in new l.WebKitCSSMatrix&&!u,E="MozPerspective"in C.style,k="OTransition"in C.style;i.Browser={ie:t,ielt9:e,webkit:o,gecko:p&&!o&&!l.opera&&!t,android:h,android23:u,chrome:a,ie3d:D,webkit3d:z,gecko3d:E,opera3d:k,any3d:!l.L_DISABLE_3D&&(D||z||E||k)&&!r,mobile:f,mobileWebkit:f&&o,mobileWebkit3d:f&&z,mobileOpera:f&&l.opera,touch:!l.L_NO_TOUCH&&!r&&(M||"ontouchstart"in l||l.DocumentTouch&&g instanceof l.DocumentTouch),msPointer:m,pointer:M,retina:P}}(),i.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},i.Point.prototype={clone:function(){return new i.Point(this.x,this.y)},add:function(t){return this.clone()._add(i.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(i.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){var e=(t=i.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=i.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=i.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+i.Util.formatNum(this.x)+", "+i.Util.formatNum(this.y)+")"}},i.point=function(t,e,n){return t instanceof i.Point?t:i.Util.isArray(t)?new i.Point(t[0],t[1]):t===v||null===t?t:new i.Point(t,e,n)},i.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,o=0,a=n.length;o<a;o++)this.extend(n[o])},i.Bounds.prototype={extend:function(t){return t=i.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new i.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new i.Point(this.min.x,this.max.y)},getTopRight:function(){return new i.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof i.Point?i.point(t):i.bounds(t))instanceof i.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=i.bounds(t);var e=this.min,n=this.max,o=t.min,a=t.max;return a.x>=e.x&&o.x<=n.x&&a.y>=e.y&&o.y<=n.y},isValid:function(){return!(!this.min||!this.max)}},i.bounds=function(t,e){return!t||t instanceof i.Bounds?t:new i.Bounds(t,e)},i.Transformation=function(t,e,n,o){this._a=t,this._b=e,this._c=n,this._d=o},i.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new i.Point((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}},i.DomUtil={get:function(t){return"string"==typeof t?g.getElementById(t):t},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle&&(n=t.currentStyle[e]),(!n||"auto"===n)&&g.defaultView){var o=g.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n},getViewportOffset:function(t){var h,e=0,n=0,o=t,a=g.body,r=g.documentElement;do{if(e+=o.offsetTop||0,n+=o.offsetLeft||0,e+=parseInt(i.DomUtil.getStyle(o,"borderTopWidth"),10)||0,n+=parseInt(i.DomUtil.getStyle(o,"borderLeftWidth"),10)||0,h=i.DomUtil.getStyle(o,"position"),o.offsetParent===a&&"absolute"===h)break;if("fixed"===h){e+=a.scrollTop||r.scrollTop||0,n+=a.scrollLeft||r.scrollLeft||0;break}if("relative"===h&&!o.offsetLeft){var u=i.DomUtil.getStyle(o,"width"),p=i.DomUtil.getStyle(o,"max-width"),f=o.getBoundingClientRect();("none"!==u||"none"!==p)&&(n+=f.left+o.clientLeft),e+=f.top+(a.scrollTop||r.scrollTop||0);break}o=o.offsetParent}while(o);o=t;do{if(o===a)break;e-=o.scrollTop||0,n-=o.scrollLeft||0,o=o.parentNode}while(o);return new i.Point(n,e)},documentIsLtr:function(){return i.DomUtil._docIsLtrCached||(i.DomUtil._docIsLtrCached=!0,i.DomUtil._docIsLtr="ltr"===i.DomUtil.getStyle(g.body,"direction")),i.DomUtil._docIsLtr},create:function(t,e,n){var o=g.createElement(t);return o.className=e,n&&n.appendChild(o),o},hasClass:function(t,e){if(t.classList!==v)return t.classList.contains(e);var n=i.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==v)for(var n=i.Util.splitWords(e),o=0,a=n.length;o<a;o++)t.classList.add(n[o]);else if(!i.DomUtil.hasClass(t,e)){var r=i.DomUtil._getClass(t);i.DomUtil._setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==v?t.classList.remove(e):i.DomUtil._setClass(t,i.Util.trim((" "+i.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===v?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===v?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch{if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}},testProp:function(t){for(var e=g.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},getTranslateString:function(t){var e=i.Browser.webkit3d;return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+(e?",0":"")+")"},getScaleString:function(t,e){return i.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+" scale("+t+") "},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&i.Browser.any3d?t.style[i.DomUtil.TRANSFORM]=i.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},i.DomUtil.TRANSFORM=i.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),i.DomUtil.TRANSITION=i.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),i.DomUtil.TRANSITION_END="webkitTransition"===i.DomUtil.TRANSITION||"OTransition"===i.DomUtil.TRANSITION?i.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in g)i.extend(i.DomUtil,{disableTextSelection:function(){i.DomEvent.on(l,"selectstart",i.DomEvent.preventDefault)},enableTextSelection:function(){i.DomEvent.off(l,"selectstart",i.DomEvent.preventDefault)}});else{var t=i.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);i.extend(i.DomUtil,{disableTextSelection:function(){if(t){var e=g.documentElement.style;this._userSelect=e[t],e[t]="none"}},enableTextSelection:function(){t&&(g.documentElement.style[t]=this._userSelect,delete this._userSelect)}})}i.extend(i.DomUtil,{disableImageDrag:function(){i.DomEvent.on(l,"dragstart",i.DomEvent.preventDefault)},enableImageDrag:function(){i.DomEvent.off(l,"dragstart",i.DomEvent.preventDefault)}})}(),i.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==v&&(this.alt=parseFloat(n))},i.extend(i.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),i.LatLng.prototype={equals:function(t){return!!t&&(t=i.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=i.LatLng.MAX_MARGIN)},toString:function(t){return"LatLng("+i.Util.formatNum(this.lat,t)+", "+i.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=i.latLng(t);var n=i.LatLng.DEG_TO_RAD,a=(t.lng-this.lng)*n,r=this.lat*n,h=t.lat*n,u=Math.sin((t.lat-this.lat)*n/2),p=Math.sin(a/2),f=u*u+p*p*Math.cos(r)*Math.cos(h);return 12756274*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))},wrap:function(t,e){var n=this.lng;return new i.LatLng(this.lat,n=(n+(e=e||180))%(e-(t=t||-180))+(n<t||n===e?e:t))}},i.latLng=function(t,e){return t instanceof i.LatLng?t:i.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new i.LatLng(t[0],t[1],t[2]):null:t===v||null===t?t:"object"==typeof t&&"lat"in t?new i.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===v?null:new i.LatLng(t,e)},i.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,o=0,a=n.length;o<a;o++)this.extend(n[o])},i.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=i.latLng(t);return(t=null!==e?e:i.latLngBounds(t))instanceof i.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new i.LatLng(t.lat,t.lng),this._northEast=new i.LatLng(t.lat,t.lng)):t instanceof i.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,a=Math.abs(e.lng-n.lng)*t;return new i.LatLngBounds(new i.LatLng(e.lat-o,e.lng-a),new i.LatLng(n.lat+o,n.lng+a))},getCenter:function(){return new i.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new i.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new i.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof i.LatLng?i.latLng(t):i.latLngBounds(t);var o,a,e=this._southWest,n=this._northEast;return t instanceof i.LatLngBounds?(o=t.getSouthWest(),a=t.getNorthEast()):o=a=t,o.lat>=e.lat&&a.lat<=n.lat&&o.lng>=e.lng&&a.lng<=n.lng},intersects:function(t){t=i.latLngBounds(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),a=t.getNorthEast();return a.lat>=e.lat&&o.lat<=n.lat&&a.lng>=e.lng&&o.lng<=n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=i.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},i.latLngBounds=function(t,e){return!t||t instanceof i.LatLngBounds?t:new i.LatLngBounds(t,e)},i.Projection={},i.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=i.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),a=t.lng*e,r=o*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new i.Point(a,r)},unproject:function(t){var e=i.LatLng.RAD_TO_DEG,n=t.x*e,o=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new i.LatLng(o,n)}},i.Projection.LonLat={project:function(t){return new i.Point(t.lng,t.lat)},unproject:function(t){return new i.LatLng(t.y,t.x)}},i.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return i.point(e,e)}},i.CRS.Simple=i.extend({},i.CRS,{projection:i.Projection.LonLat,transformation:new i.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),i.CRS.EPSG3857=i.extend({},i.CRS,{code:"EPSG:3857",projection:i.Projection.SphericalMercator,transformation:new i.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.projection.project(t).multiplyBy(6378137)}}),i.CRS.EPSG900913=i.extend({},i.CRS.EPSG3857,{code:"EPSG:900913"}),i.CRS.EPSG4326=i.extend({},i.CRS,{code:"EPSG:4326",projection:i.Projection.LonLat,transformation:new i.Transformation(1/360,.5,-1/360,.5)}),i.Map=i.Class.extend({includes:i.Mixin.Events,options:{crs:i.CRS.EPSG3857,fadeAnimation:i.DomUtil.TRANSITION&&!i.Browser.android23,trackResize:!0,markerZoomAnimation:i.DomUtil.TRANSITION&&i.Browser.any3d},initialize:function(t,e){e=i.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=i.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==v&&this.setView(i.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===v?this.getZoom():e,this._resetView(i.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),a=this.getSize().divideBy(2),h=(t instanceof i.Point?t:this.latLngToContainerPoint(t)).subtract(a).multiplyBy(1-1/o),u=this.containerPointToLatLng(a.add(h));return this.setView(u,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():i.latLngBounds(t);var n=i.point(e.paddingTopLeft||e.padding||[0,0]),o=i.point(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,n.add(o));a=e.maxZoom?Math.min(e.maxZoom,a):a;var r=o.subtract(n).divideBy(2),h=this.project(t.getSouthWest(),a),u=this.project(t.getNorthEast(),a),p=this.unproject(h.add(u).divideBy(2).add(r),a);return this.setView(p,a,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(i.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=i.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),o=this._limitCenter(n,this._zoom,t);return n.equals(o)?this:this.panTo(o,e)},addLayer:function(t){var e=i.stamp(t);return this._layers[e]||(this._layers[e]=t,t.options&&(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&i.TileLayer&&t instanceof i.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t)),this},removeLayer:function(t){var e=i.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&i.TileLayer&&t instanceof i.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return!!t&&i.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=i.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),a=n.divideBy(2).round(),r=o.subtract(a);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch{this._container._leaflet=v}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new i.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===v?this._layersMinZoom===v?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===v?this._layersMaxZoom===v?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=i.latLngBounds(t);var f,o=this.getMinZoom()-(e?1:0),a=this.getMaxZoom(),r=this.getSize(),h=t.getNorthWest(),u=t.getSouthEast(),p=!0;n=i.point(n||[0,0]);do{o++,f=this.project(u,o).subtract(this.project(h,o)).add(n),p=e?f.x<r.x||f.y<r.y:r.contains(f)}while(p&&o<=a);return p&&e?null:e?o:o-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new i.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new i.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===v?this._zoom:e,this.options.crs.latLngToPoint(i.latLng(t),e)},unproject:function(t,e){return e=e===v?this._zoom:e,this.options.crs.pointToLatLng(i.point(t),e)},layerPointToLatLng:function(t){var e=i.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(i.latLng(t))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return i.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return i.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(i.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(i.latLng(t)))},mouseEventToContainerPoint:function(t){return i.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=i.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;i.DomUtil.addClass(t,"leaflet-container"+(i.Browser.touch?" leaflet-touch":"")+(i.Browser.retina?" leaflet-retina":"")+(i.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=i.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(i.DomUtil.addClass(t.markerPane,e),i.DomUtil.addClass(t.shadowPane,e),i.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return i.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){for(var e=0,n=(t=t?i.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_resetView:function(t,e,n,o){var a=this._zoom!==e;o||(this.fire("movestart"),a&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):i.DomUtil.setPosition(this._mapPane,new i.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(a||o)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){i.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,o=this._getZoomSpan();for(t in this._zoomBoundLayers){var a=this._zoomBoundLayers[t];isNaN(a.options.minZoom)||(e=Math.min(e,a.options.minZoom)),isNaN(a.options.maxZoom)||(n=Math.max(n,a.options.maxZoom))}t===v?this._layersMaxZoom=this._layersMinZoom=v:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(i.DomEvent){i.DomEvent[t=t||"on"](this._container,"click",this._onMouseClick,this);var n,o,e=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,o=e.length;n<o;n++)i.DomEvent[t](this._container,e[n],this._fireMouseEvent,this);this.options.trackResize&&i.DomEvent[t](l,"resize",this._onResize,this)}},_onResize:function(){i.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=i.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||i.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!i.DomEvent._skipped(t)){var e=t.type;if(this.hasEventListeners(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e)){"contextmenu"===e&&i.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),o=this.containerPointToLayerPoint(n),a=this.layerPointToLatLng(o);this.fire(e,{latlng:a,layerPoint:o,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return i.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(o)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),a=this.getSize().divideBy(2),r=new i.Bounds(o.subtract(a),o.add(a)),h=this._getBoundsOffset(r,n,e);return this.unproject(o.add(h),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new i.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=this.project(e.getNorthWest(),n).subtract(t.min),a=this.project(e.getSouthEast(),n).subtract(t.max),r=this._rebound(o.x,-a.x),h=this._rebound(o.y,-a.y);return new i.Point(r,h)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),i.map=function(t,e){return new i.Map(t,e)},i.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=i.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),a=this.R_MAJOR,h=t.lng*e*a,u=o*e,p=this.R_MINOR/a,f=Math.sqrt(1-p*p),m=f*Math.sin(u);m=Math.pow((1-m)/(1+m),.5*f);var M=Math.tan(.5*(.5*Math.PI-u))/m;return u=-a*Math.log(M),new i.Point(h,u)},unproject:function(t){for(var C,e=i.LatLng.RAD_TO_DEG,n=this.R_MAJOR,a=t.x*e/n,r=this.R_MINOR/n,h=Math.sqrt(1-r*r),u=Math.exp(-t.y/n),p=Math.PI/2-2*Math.atan(u),M=15,P=.1;Math.abs(P)>1e-7&&--M>0;)C=h*Math.sin(p),p+=P=Math.PI/2-2*Math.atan(u*Math.pow((1-C)/(1+C),.5*h))-p;return new i.LatLng(p*e,a)}},i.CRS.EPSG3395=i.extend({},i.CRS,{code:"EPSG:3395",projection:i.Projection.Mercator,transformation:(n=.5/(Math.PI*i.Projection.Mercator.R_MAJOR),new i.Transformation(n,.5,-n,.5))}),i.TileLayer=i.Class.extend({includes:i.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:i.Browser.mobile,updateWhenIdle:i.Browser.mobile},initialize:function(t,e){(e=i.setOptions(this,e)).detectRetina&&i.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=i.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=i.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==v&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var a,r,h,n=t.children,o=-e(1/0,-1/0);for(r=0,h=n.length;r<h;r++)n[r]!==this._container&&(a=parseInt(n[r].style.zIndex,10),isNaN(a)||(o=e(o,a)));this.options.zIndex=this._container.style.zIndex=(isFinite(o)?o:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(i.Browser.ielt9)for(t in e)i.DomUtil.setOpacity(e[t],this.options.opacity);else i.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=i.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=i.DomUtil.create("div",e,this._container),this._tileContainer=i.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,o=this.options.tileSize;return n&&e>n&&(o=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*o)),o},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),o=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var a=i.bounds(e.min.divideBy(o)._floor(),e.max.divideBy(o)._floor());this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(a)}}},_addTilesFromCenterOut:function(t){var o,a,r,e=[],n=t.getCenter();for(o=t.min.y;o<=t.max.y;o++)for(a=t.min.x;a<=t.max.x;a++)r=new i.Point(a,o),this._tileShouldBeLoaded(r)&&e.push(r);var h=e.length;if(0!==h){e.sort(function(p,f){return p.distanceTo(n)-f.distanceTo(n)});var u=g.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=h,a=0;a<h;a++)this._addTile(e[a],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var o=this._getTileSize(),a=t.multiplyBy(o),r=a.add([o,o]),h=this._map.unproject(a),u=this._map.unproject(r);if(!e.continuousWorld&&!e.noWrap&&(h=h.wrap(),u=u.wrap()),!e.bounds.intersects([h,u]))return!1}return!0},_removeOtherTiles:function(t){var e,n,o,a;for(a in this._tiles)e=a.split(":"),n=parseInt(e[0],10),o=parseInt(e[1],10),(n<t.min.x||n>t.max.x||o<t.min.y||o>t.max.y)&&this._removeTile(a)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(i.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),i.Browser.android||(e.onload=null,e.src=i.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),o=this._getTile();i.DomUtil.setPosition(o,n,i.Browser.chrome),this._tiles[t.x+":"+t.y]=o,this._loadTile(o,t),o.parentNode!==this._tileContainer&&e.appendChild(o)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return i.Util.template(this._url,i.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();!this.options.continuousWorld&&!this.options.noWrap&&(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=i.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=i.Util.falseFn,i.Browser.ielt9&&this.options.opacity!==v&&i.DomUtil.setOpacity(t,this.options.opacity),i.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&i.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(i.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==i.Util.emptyImageUrl&&(i.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),i.tileLayer=function(t,e){return new i.TileLayer(t,e)},i.TileLayer.WMS=i.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=i.extend({},this.defaultWmsParams),o=e.tileSize||this.options.tileSize;for(var a in n.width=n.height=e.detectRetina&&i.Browser.retina?2*o:o,e)!this.options.hasOwnProperty(a)&&"crs"!==a&&(n[a]=e[a]);this.wmsParams=n,i.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,i.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,o=t.multiplyBy(n),a=o.add([n,n]),r=this._crs.project(e.unproject(o,t.z)),h=this._crs.project(e.unproject(a,t.z)),u=this._wmsVersion>=1.3&&this._crs===i.CRS.EPSG4326?[h.y,r.x,r.y,h.x].join(","):[r.x,h.y,h.x,r.y].join(","),p=i.Util.template(this._url,{s:this._getSubdomain(t)});return p+i.Util.getParamString(this.wmsParams,p,!0)+"&BBOX="+u},setParams:function(t,e){return i.extend(this.wmsParams,t),e||this.redraw(),this}}),i.tileLayer.wms=function(t,e){return new i.TileLayer.WMS(t,e)},i.TileLayer.Canvas=i.TileLayer.extend({options:{async:!1},initialize:function(t){i.setOptions(this,t)},redraw:function(){for(var t in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=i.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=i.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),i.tileLayer.canvas=function(t){return new i.TileLayer.Canvas(t)},i.ImageOverlay=i.Class.extend({includes:i.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=i.latLngBounds(e),i.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&i.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=i.DomUtil.create("img","leaflet-image-layer"),i.DomUtil.addClass(this._image,this._map.options.zoomAnimation&&i.Browser.any3d?"leaflet-zoom-animated":"leaflet-zoom-hide"),this._updateOpacity(),i.extend(this._image,{galleryimg:"no",onselectstart:i.Util.falseFn,onmousemove:i.Util.falseFn,onload:i.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,o=e.getZoomScale(t.zoom),a=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),h=e._latLngToNewLayerPoint(a,t.zoom,t.center),u=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(h),p=h._add(u._multiplyBy(.5*(1-1/o)));n.style[i.DomUtil.TRANSFORM]=i.DomUtil.getTranslateString(p)+" scale("+o+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);i.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){i.DomUtil.setOpacity(this._image,this.options.opacity)}}),i.imageOverlay=function(t,e,n){return new i.ImageOverlay(t,e,n)},i.Icon=i.Class.extend({options:{className:""},initialize:function(t){i.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o,n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}return o=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var a,n=this.options,o=i.point(n[e+"Size"]);!(a=i.point("shadow"===e&&n.shadowAnchor||n.iconAnchor))&&o&&(a=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||g.createElement("img")).src=t,e},_getIconUrl:function(t){return i.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),i.icon=function(t){return new i.Icon(t)},i.Icon.Default=i.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];i.Browser.retina&&"icon"===t&&(t+="-2x");var n=i.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),i.Icon.Default.imagePath=function(){var n,o,a,h,t=g.getElementsByTagName("script"),e=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(n=0,o=t.length;n<o;n++)if((a=t[n].src).match(e))return((h=a.split(e)[0])?h+"/":"")+"images"}(),i.Marker=i.Class.extend({includes:i.Mixin.Events,options:{icon:new i.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){i.setOptions(this,e),this._latlng=i.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=i.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,o=e.options.zoomAnimation&&e.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",a=t.icon.createIcon(this._icon),r=!1;a!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(a.title=t.title),t.alt&&(a.alt=t.alt)),i.DomUtil.addClass(a,o),t.keyboard&&(a.tabIndex="0"),this._icon=a,this._initInteraction(),t.riseOnHover&&i.DomEvent.on(a,"mouseover",this._bringToFront,this).on(a,"mouseout",this._resetZIndex,this);var h=t.icon.createShadow(this._shadow),u=!1;h!==this._shadow&&(this._removeShadow(),u=!0),h&&i.DomUtil.addClass(h,o),this._shadow=h,t.opacity<1&&this._updateOpacity();var p=this._map._panes;r&&p.markerPane.appendChild(this._icon),h&&u&&p.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&i.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){i.DomUtil.setPosition(this._icon,t),this._shadow&&i.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];i.DomUtil.addClass(t,"leaflet-clickable"),i.DomEvent.on(t,"click",this._onMouseClick,this),i.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)i.DomEvent.on(t,e[n],this._fireMouseEvent,this);i.Handler.MarkerDrag&&(this.dragging=new i.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&i.DomEvent.stopPropagation(t),!e&&((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()||this.fire(t.type,{originalEvent:t,latlng:this._latlng}))},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&i.DomEvent.preventDefault(t),"mousedown"!==t.type?i.DomEvent.stopPropagation(t):i.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){i.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&i.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),i.marker=function(t,e){return new i.Marker(t,e)},i.DivIcon=i.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:g.createElement("div"),n=this.options;return e.innerHTML=!1!==n.html?n.html:"",n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),i.divIcon=function(t){return new i.DivIcon(t)},i.Map.mergeOptions({closePopupOnClick:!0}),i.Popup=i.Class.extend({includes:i.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){i.setOptions(this,t),this._source=e,this._animated=i.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&i.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&i.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),i.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&i.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=i.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var o,t="leaflet-popup",n=this._container=i.DomUtil.create("div",t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"));this.options.closeButton&&((o=this._closeButton=i.DomUtil.create("a",t+"-close-button",n)).href="#close",o.innerHTML="&#215;",i.DomEvent.disableClickPropagation(o),i.DomEvent.on(o,"click",this._onCloseButtonClick,this));var a=this._wrapper=i.DomUtil.create("div",t+"-content-wrapper",n);i.DomEvent.disableClickPropagation(a),this._contentNode=i.DomUtil.create("div",t+"-content",a),i.DomEvent.disableScrollPropagation(this._contentNode),i.DomEvent.on(a,"contextmenu",i.DomEvent.stopPropagation),this._tipContainer=i.DomUtil.create("div",t+"-tip-container",n),this._tip=i.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var a=this.options.maxHeight,r="leaflet-popup-scrolled";a&&t.offsetHeight>a?(e.height=a+"px",i.DomUtil.addClass(t,r)):i.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=i.point(this.options.offset);e&&i.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);i.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,o=new i.Point(this._containerLeft,-e-this._containerBottom);this._animated&&o._add(i.DomUtil.getPosition(this._container));var a=t.layerPointToContainerPoint(o),r=i.point(this.options.autoPanPadding),h=i.point(this.options.autoPanPaddingTopLeft||r),u=i.point(this.options.autoPanPaddingBottomRight||r),p=t.getSize(),f=0,m=0;a.x+n+u.x>p.x&&(f=a.x+n-p.x+u.x),a.x-f-h.x<0&&(f=a.x-h.x),a.y+e+u.y>p.y&&(m=a.y+e-p.y+u.y),a.y-m-h.y<0&&(m=a.y-h.y),(f||m)&&t.fire("autopanstart").panBy([f,m])}},_onCloseButtonClick:function(t){this._close(),i.DomEvent.stop(t)}}),i.popup=function(t,e){return new i.Popup(t,e)},i.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof i.Popup)){var o=t;t=new i.Popup(n).setLatLng(e).setContent(o)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return(!t||t===this._popup)&&(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),i.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=i.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(i.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=i.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof i.Popup?(i.setOptions(t,e),this._popup=t,t._source=this):this._popup=new i.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),i.LayerGroup=i.Class.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var n,o,e=Array.prototype.slice.call(arguments,1);for(n in this._layers)(o=this._layers[n])[t]&&o[t].apply(o,e);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return i.stamp(t)}}),i.layerGroup=function(t){return new i.LayerGroup(t)},i.FeatureGroup=i.LayerGroup.extend({includes:i.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(i.FeatureGroup.EVENTS,this._propagateEvent,this),i.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(i.FeatureGroup.EVENTS,this._propagateEvent,this),i.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new i.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof i.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=i.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),i.featureGroup=function(t){return new i.FeatureGroup(t)},i.Path=i.Class.extend({includes:[i.Mixin.Events],statics:{CLIP_PADDING:function(){var e=((i.Browser.mobile?1280:2e3)/Math.max(l.outerWidth,l.outerHeight)-1)/2;return Math.max(0,Math.min(.5,e))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){i.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,i.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return i.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),i.Map.include({_updatePathViewport:function(){var t=i.Path.CLIP_PADDING,e=this.getSize(),o=i.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),a=o.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new i.Bounds(o,a)}}),i.Path.SVG_NS="http://www.w3.org/2000/svg",i.Browser.svg=!(!g.createElementNS||!g.createElementNS(i.Path.SVG_NS,"svg").createSVGRect),i.Path=i.Path.extend({statics:{SVG:i.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return g.createElementNS(i.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&i.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),!this.options.clickable&&!this.options.pointerEvents&&this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(i.Browser.svg||!i.Browser.vml)&&i.DomUtil.addClass(this._path,"leaflet-clickable"),i.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)i.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),o=e.containerPointToLayerPoint(n),a=e.layerPointToLatLng(o);this.fire(t.type,{latlng:a,layerPoint:o,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&i.DomEvent.preventDefault(t),"mousemove"!==t.type&&i.DomEvent.stopPropagation(t)}}}),i.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=i.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&i.Browser.any3d?(i.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):i.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[i.DomUtil.TRANSFORM]=i.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,o=n.x-e.x,a=n.y-e.y,r=this._pathRoot,h=this._panes.overlayPane;i.Browser.mobileWebkit&&h.removeChild(r),i.DomUtil.setPosition(r,e),r.setAttribute("width",o),r.setAttribute("height",a),r.setAttribute("viewBox",[e.x,e.y,o,a].join(" ")),i.Browser.mobileWebkit&&h.appendChild(r)}}}),i.Path.include({bindPopup:function(t,e){return t instanceof i.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new i.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),i.Browser.vml=!i.Browser.svg&&function(){try{var t=g.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch{return!1}}(),i.Path=i.Browser.svg||!i.Browser.vml?i.Path:i.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return g.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return g.createElement("<lvml:"+t+' class="lvml">')}}catch{return function(e){return g.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");i.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&i.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,o=this._container;o.stroked=n.stroke,o.filled=n.fill,n.stroke?(t||((t=this._stroke=this._createElement("stroke")).endcap="round",o.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,t.dashStyle=n.dashArray?i.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):"",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(o.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),o.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(o.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),i.Map.include(i.Browser.svg||!i.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=g.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),i.Browser.canvas=!!g.createElement("canvas").getContext,i.Path=i.Path.SVG&&!l.L_PREFER_CANVAS||!i.Browser.canvas?i.Path:i.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return i.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!i.Path._updateRequest&&(i.Path._updateRequest=i.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){i.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,n,o,a;for(this._ctx.beginPath(),t=0,n=this._parts.length;t<n;t++){for(e=0,o=this._parts[t].length;e<o;e++)this._ctx[(0===e?"move":"line")+"To"]((a=this._parts[t][e]).x,a.y);this instanceof i.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){!this._map||this._map._animatingZoom||(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),i.Map.include(i.Path.SVG&&!l.L_PREFER_CANVAS||!i.Browser.canvas?{}:{_initPathRoot:function(){var e,t=this._pathRoot;t||((t=this._pathRoot=g.createElement("canvas")).style.position="absolute",(e=this._canvasCtx=t.getContext("2d")).lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(t),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),o=this._pathRoot;i.DomUtil.setPosition(o,e),o.width=n.x,o.height=n.y,o.getContext("2d").translate(-e.x,-e.y)}}}),i.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,a=new(typeof Uint8Array!=v+""?Uint8Array:Array)(n);a[0]=a[n-1]=1,this._simplifyDPStep(t,a,e,0,n-1);var r,h=[];for(r=0;r<n;r++)a[r]&&h.push(t[r]);return h},_simplifyDPStep:function(t,e,n,o,a){var h,u,p,r=0;for(u=o+1;u<=a-1;u++)(p=this._sqClosestPointOnSegment(t[u],t[o],t[a],!0))>r&&(h=u,r=p);r>n&&(e[h]=1,this._simplifyDPStep(t,e,n,o,h),this._simplifyDPStep(t,e,n,h,a))},_reducePoints:function(t,e){for(var n=[t[0]],o=1,a=0,r=t.length;o<r;o++)this._sqDist(t[o],t[a])>e&&(n.push(t[o]),a=o);return a<r-1&&n.push(t[r-1]),n},clipSegment:function(t,e,n,o){var h,u,p,a=o?this._lastCode:this._getBitCode(t,n),r=this._getBitCode(e,n);for(this._lastCode=r;;){if(!(a|r))return[t,e];if(a&r)return!1;u=this._getEdgeIntersection(t,e,h=a||r,n),p=this._getBitCode(u,n),h===a?(t=u,a=p):(e=u,r=p)}},_getEdgeIntersection:function(t,e,n,o){var a=e.x-t.x,r=e.y-t.y,h=o.min,u=o.max;return 8&n?new i.Point(t.x+a*(u.y-t.y)/r,u.y):4&n?new i.Point(t.x+a*(h.y-t.y)/r,h.y):2&n?new i.Point(u.x,t.y+r*(u.x-t.x)/a):1&n?new i.Point(h.x,t.y+r*(h.x-t.x)/a):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o},_sqClosestPointOnSegment:function(t,e,n,o){var f,a=e.x,r=e.y,h=n.x-a,u=n.y-r,p=h*h+u*u;return p>0&&((f=((t.x-a)*h+(t.y-r)*u)/p)>1?(a=n.x,r=n.y):f>0&&(a+=h*f,r+=u*f)),h=t.x-a,u=t.y-r,o?h*h+u*u:new i.Point(a,r)}},i.Polyline=i.Path.extend({initialize:function(t,e){i.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";t<e;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(i.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var o,a,e=1/0,n=this._parts,r=null,h=0,u=n.length;h<u;h++)for(var p=n[h],f=1,m=p.length;f<m;f++){var M=i.LineUtil._sqClosestPointOnSegment(t,o=p[f-1],a=p[f],!0);M<e&&(e=M,r=i.LineUtil._sqClosestPointOnSegment(t,o,a))}return r&&(r.distance=Math.sqrt(e)),r},getBounds:function(){return new i.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,o,a=e?t:[];for(n=0,o=t.length;n<o;n++){if(i.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;a[n]=i.latLng(t[n])}return a},_initEvents:function(){i.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var r,e=i.Path.VML,n=0,o=t.length,a="";n<o;n++)r=t[n],e&&r._round(),a+=(n?"L":"M")+r.x+" "+r.y;return a},_clipPoints:function(){var n,o,a,t=this._originalPoints,e=t.length;if(this.options.noClip)this._parts=[t];else{this._parts=[];var r=this._parts,h=this._map._pathViewport,u=i.LineUtil;for(n=0,o=0;n<e-1;n++)(a=u.clipSegment(t[n],t[n+1],h,n))&&(r[o]=r[o]||[],r[o].push(a[0]),(a[1]!==t[n+1]||n===e-2)&&(r[o].push(a[1]),o++))}},_simplifyPoints:function(){for(var t=this._parts,e=i.LineUtil,n=0,o=t.length;n<o;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),i.Path.prototype._updatePath.call(this))}}),i.polyline=function(t,e){return new i.Polyline(t,e)},i.PolyUtil={},i.PolyUtil.clipPolygon=function(t,e){var n,a,r,h,u,p,f,m,M,o=[1,4,2,8],P=i.LineUtil;for(a=0,f=t.length;a<f;a++)t[a]._code=P._getBitCode(t[a],e);for(h=0;h<4;h++){for(m=o[h],n=[],a=0,r=(f=t.length)-1;a<f;r=a++)p=t[r],(u=t[a])._code&m?p._code&m||((M=P._getEdgeIntersection(p,u,m,e))._code=P._getBitCode(M,e),n.push(M)):(p._code&m&&((M=P._getEdgeIntersection(p,u,m,e))._code=P._getBitCode(M,e),n.push(M)),n.push(u));t=n}return t},i.Polygon=i.Polyline.extend({options:{fill:!0},initialize:function(t,e){i.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,o;if(t&&i.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;e<n;e++)(o=this._holes[e]=this._convertLatLngs(this._holes[e]))[0].equals(o[o.length-1])&&o.pop();(t=this._latlngs).length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){var t,e,n,o;if(i.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(t=0,n=this._holes.length;t<n;t++)for(this._holePoints[t]=[],e=0,o=this._holes[t].length;e<o;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])},setLatLngs:function(t){return t&&i.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):i.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var e=[];if(this._parts=[this._originalPoints].concat(this._holePoints),!this.options.noClip){for(var n=0,o=this._parts.length;n<o;n++){var a=i.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);a.length&&e.push(a)}this._parts=e}},_getPathPartStr:function(t){return i.Polyline.prototype._getPathPartStr.call(this,t)+(i.Browser.svg?"z":"x")}}),i.polygon=function(t,e){return new i.Polygon(t,e)},function(){function t(e){return i.FeatureGroup.extend({initialize:function(n,o){this._layers={},this._options=o,this.setLatLngs(n)},setLatLngs:function(n){var o=0,a=n.length;for(this.eachLayer(function(r){o<a?r.setLatLngs(n[o++]):this.removeLayer(r)},this);o<a;)this.addLayer(new e(n[o++],this._options));return this},getLatLngs:function(){var n=[];return this.eachLayer(function(o){n.push(o.getLatLngs())}),n}})}i.MultiPolyline=t(i.Polyline),i.MultiPolygon=t(i.Polygon),i.multiPolyline=function(e,n){return new i.MultiPolyline(e,n)},i.multiPolygon=function(e,n){return new i.MultiPolygon(e,n)}}(),i.Rectangle=i.Polygon.extend({initialize:function(t,e){i.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=i.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),i.rectangle=function(t,e){return new i.Rectangle(t,e)},i.Circle=i.Path.extend({initialize:function(t,e,n){i.Path.prototype.initialize.call(this,n),this._latlng=i.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=i.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new i.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":i.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(i.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),i.circle=function(t,e,n){return new i.Circle(t,e,n)},i.CircleMarker=i.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){i.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){i.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return i.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),i.circleMarker=function(t,e){return new i.CircleMarker(t,e)},i.Polyline.include(i.Path.CANVAS?{_containsPoint:function(t,e){var n,o,a,r,h,p,f=this.options.weight/2;for(i.Browser.touch&&(f+=10),n=0,r=this._parts.length;n<r;n++)for(o=0,a=(h=(p=this._parts[n]).length)-1;o<h;a=o++)if((e||0!==o)&&i.LineUtil.pointToSegmentDistance(t,p[a],p[o])<=f)return!0;return!1}}:{}),i.Polygon.include(i.Path.CANVAS?{_containsPoint:function(t){var n,o,a,r,h,u,p,f,e=!1;if(i.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(r=0,p=this._parts.length;r<p;r++)for(h=0,u=(f=(n=this._parts[r]).length)-1;h<f;u=h++)(o=n[h]).y>t.y!=(a=n[u]).y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(e=!e);return e}}:{}),i.Circle.include(i.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(this._point)<=this._radius+n}}:{}),i.CircleMarker.include(i.Path.CANVAS?{_updateStyle:function(){i.Path.prototype._updateStyle.call(this)}}:{}),i.GeoJSON=i.FeatureGroup.extend({initialize:function(t,e){i.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var n,o,a,e=i.Util.isArray(t)?t:t.features;if(e){for(n=0,o=e.length;n<o;n++)((a=e[n]).geometries||a.geometry||a.features||a.coordinates)&&this.addData(e[n]);return this}var r=this.options;if(!r.filter||r.filter(t)){var h=i.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return h.feature=i.GeoJSON.asFeature(t),h.defaultOptions=h.options,this.resetStyle(h),r.onEachFeature&&r.onEachFeature(t,h),this.addLayer(h)}},resetStyle:function(t){var e=this.options.style;e&&(i.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),i.extend(i.GeoJSON,{geometryToLayer:function(t,e,n,o){var u,p,f,m,a="Feature"===t.type?t.geometry:t,r=a.coordinates,h=[];switch(n=n||this.coordsToLatLng,a.type){case"Point":return u=n(r),e?e(t,u):new i.Marker(u);case"MultiPoint":for(f=0,m=r.length;f<m;f++)u=n(r[f]),h.push(e?e(t,u):new i.Marker(u));return new i.FeatureGroup(h);case"LineString":return p=this.coordsToLatLngs(r,0,n),new i.Polyline(p,o);case"Polygon":if(2===r.length&&!r[1].length)throw new Error("Invalid GeoJSON object.");return p=this.coordsToLatLngs(r,1,n),new i.Polygon(p,o);case"MultiLineString":return p=this.coordsToLatLngs(r,1,n),new i.MultiPolyline(p,o);case"MultiPolygon":return p=this.coordsToLatLngs(r,2,n),new i.MultiPolygon(p,o);case"GeometryCollection":for(f=0,m=a.geometries.length;f<m;f++)h.push(this.geometryToLayer({geometry:a.geometries[f],type:"Feature",properties:t.properties},e,n,o));return new i.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new i.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var o,a,r,h=[];for(a=0,r=t.length;a<r;a++)o=e?this.coordsToLatLngs(t[a],e-1,n):(n||this.coordsToLatLng)(t[a]),h.push(o);return h},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==v&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,o=t.length;n<o;n++)e.push(i.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?i.extend({},t.feature,{geometry:e}):i.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var S={toGeoJSON:function(){return i.GeoJSON.getFeature(this,{type:"Point",coordinates:i.GeoJSON.latLngToCoords(this.getLatLng())})}};i.Marker.include(S),i.Circle.include(S),i.CircleMarker.include(S),i.Polyline.include({toGeoJSON:function(){return i.GeoJSON.getFeature(this,{type:"LineString",coordinates:i.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),i.Polygon.include({toGeoJSON:function(){var e,n,o,t=[i.GeoJSON.latLngsToCoords(this.getLatLngs())];if(t[0].push(t[0][0]),this._holes)for(e=0,n=this._holes.length;e<n;e++)(o=i.GeoJSON.latLngsToCoords(this._holes[e])).push(o[0]),t.push(o);return i.GeoJSON.getFeature(this,{type:"Polygon",coordinates:t})}}),function(){function t(e){return function(){var n=[];return this.eachLayer(function(o){n.push(o.toGeoJSON().geometry.coordinates)}),i.GeoJSON.getFeature(this,{type:e,coordinates:n})}}i.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),i.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),i.LayerGroup.include({toGeoJSON:function(){var o,e=this.feature&&this.feature.geometry,n=[];if(e&&"MultiPoint"===e.type)return t("MultiPoint").call(this);var a=e&&"GeometryCollection"===e.type;return this.eachLayer(function(r){r.toGeoJSON&&(o=r.toGeoJSON(),n.push(a?o.geometry:i.GeoJSON.asFeature(o)))}),a?i.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),i.geoJson=function(t,e){return new i.GeoJSON(t,e)},i.DomEvent={addListener:function(t,e,n,o){var h,u,a=i.stamp(n),r="_leaflet_"+e+a;return t[r]?this:(h=function(f){return n.call(o||t,f||i.DomEvent._getEvent())},i.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,h,a):(i.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,h,a),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",h,!1),t.addEventListener(e,h,!1)):"mouseenter"===e||"mouseleave"===e?(u=h,t.addEventListener("mouseenter"===e?"mouseover":"mouseout",h=function(f){if(i.DomEvent._checkMouse(t,f))return u(f)},!1)):("click"===e&&i.Browser.android&&(u=h,h=function(f){return i.DomEvent._filterClick(f,u)}),t.addEventListener(e,h,!1)):"attachEvent"in t&&t.attachEvent("on"+e,h),t[r]=h,this))},removeListener:function(t,e,n){var o=i.stamp(n),a="_leaflet_"+e+o,r=t[a];return r?(i.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):i.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):t.removeEventListener("mouseenter"===e||"mouseleave"===e?"mouseenter"===e?"mouseover":"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[a]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,i.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=i.DomEvent.stopPropagation;return i.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=i.DomEvent.stopPropagation,n=i.Draggable.START.length-1;n>=0;n--)i.DomEvent.on(t,i.Draggable.START[n],e);return i.DomEvent.on(t,"click",i.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return i.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new i.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new i.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){i.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t},_getEvent:function(){var t=l.event;if(!t)for(var e=arguments.callee.caller;e&&(!(t=e.arguments[0])||l.Event!==t.constructor);)e=e.caller;return t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,o=i.DomEvent._lastClick&&n-i.DomEvent._lastClick;if(!(o&&o>100&&o<500||t.target._simulatedClick&&!t._simulated))return i.DomEvent._lastClick=n,e(t);i.DomEvent.stop(t)}},i.DomEvent.on=i.DomEvent.addListener,i.DomEvent.off=i.DomEvent.removeListener,i.Draggable=i.Class.extend({includes:i.Mixin.Events,statics:{START:i.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=i.Draggable.START.length-1;t>=0;t--)i.DomEvent.on(this._dragStartTarget,i.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=i.Draggable.START.length-1;t>=0;t--)i.DomEvent.off(this._dragStartTarget,i.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(i.DomEvent.stopPropagation(t),!i.Draggable._disabled&&(i.DomUtil.disableImageDrag(),i.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new i.Point(e.clientX,e.clientY),this._startPos=this._newPos=i.DomUtil.getPosition(this._element),i.DomEvent.on(g,i.Draggable.MOVE[t.type],this._onMove,this).on(g,i.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,o=new i.Point(e.clientX,e.clientY).subtract(this._startPoint);!o.x&&!o.y||i.Browser.touch&&Math.abs(o.x)+Math.abs(o.y)<3||(i.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=i.DomUtil.getPosition(this._element).subtract(o),i.DomUtil.addClass(g.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,i.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,i.Util.cancelAnimFrame(this._animRequest),this._animRequest=i.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),i.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var t in i.DomUtil.removeClass(g.body,"leaflet-dragging"),this._lastTarget&&(i.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),i.Draggable.MOVE)i.DomEvent.off(g,i.Draggable.MOVE[t],this._onMove).off(g,i.Draggable.END[t],this._onUp);i.DomUtil.enableImageDrag(),i.DomUtil.enableTextSelection(),this._moved&&this._moving&&(i.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),i.Handler=i.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),i.Map.mergeOptions({dragging:!0,inertia:!i.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:i.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),i.Map.Drag=i.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new i.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,a=(o-e+n)%t+e-n,r=(o+e+n)%t-e-n,h=Math.abs(a+n)<Math.abs(r+n)?a:r;this._draggable._newPos.x=h},_onDragEnd:function(t){var e=this._map,n=e.options,o=+new Date-this._lastTime,a=!n.inertia||o>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),a)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),u=n.easeLinearity,p=r.multiplyBy(u/((this._lastTime+o-this._times[0])/1e3)),f=p.distanceTo([0,0]),m=Math.min(n.inertiaMaxSpeed,f),M=p.multiplyBy(m/f),P=m/(n.inertiaDeceleration*u),C=M.multiplyBy(-P/2).round();C.x&&C.y?(C=e._limitOffset(C,e.options.maxBounds),i.Util.requestAnimFrame(function(){e.panBy(C,{duration:P,easeLinearity:u,noMoveStart:!0})})):e.fire("moveend")}}}),i.Map.addInitHook("addHandler","dragging",i.Map.Drag),i.Map.mergeOptions({doubleClickZoom:!0}),i.Map.DoubleClickZoom=i.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),i.Map.addInitHook("addHandler","doubleClickZoom",i.Map.DoubleClickZoom),i.Map.mergeOptions({scrollWheelZoom:!0}),i.Map.ScrollWheelZoom=i.Handler.extend({addHooks:function(){i.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),i.DomEvent.on(this._map._container,"MozMousePixelScroll",i.DomEvent.preventDefault),this._delta=0},removeHooks:function(){i.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),i.DomEvent.off(this._map._container,"MozMousePixelScroll",i.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=i.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i.bind(this._performZoom,this),n),i.DomEvent.preventDefault(t),i.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),i.Map.addInitHook("addHandler","scrollWheelZoom",i.Map.ScrollWheelZoom),i.extend(i.DomEvent,{_touchstart:i.Browser.msPointer?"MSPointerDown":i.Browser.pointer?"pointerdown":"touchstart",_touchend:i.Browser.msPointer?"MSPointerUp":i.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){var o,h,a=!1,u="_leaflet_",p=this._touchstart,f=this._touchend,m=[];function M(D){var z;if(i.Browser.pointer?(m.push(D.pointerId),z=m.length):z=D.touches.length,!(z>1)){var E=Date.now(),k=E-(o||E);h=D.touches?D.touches[0]:D,a=k>0&&k<=250,o=E}}function P(D){if(i.Browser.pointer){var z=m.indexOf(D.pointerId);if(-1===z)return;m.splice(z,1)}if(a){if(i.Browser.pointer){var k,E={};for(var B in h)E[B]="function"==typeof(k=h[B])?k.bind(h):k;h=E}h.type="dblclick",e(h),o=null}}t[u+p+n]=M,t[u+f+n]=P;var C=i.Browser.pointer?g.documentElement:t;return t.addEventListener(p,M,!1),C.addEventListener(f,P,!1),i.Browser.pointer&&C.addEventListener(i.DomEvent.POINTER_CANCEL,P,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+e],!1),(i.Browser.pointer?g.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+e],!1),i.Browser.pointer&&g.documentElement.removeEventListener(i.DomEvent.POINTER_CANCEL,t[n+this._touchend+e],!1),this}}),i.extend(i.DomEvent,{POINTER_DOWN:i.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:i.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:i.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:i.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,o){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,o);case"touchend":return this.addPointerListenerEnd(t,e,n,o);case"touchmove":return this.addPointerListenerMove(t,e,n,o);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,n,o){var r=this._pointers,h=function(p){"mouse"!==p.pointerType&&p.pointerType!==p.MSPOINTER_TYPE_MOUSE&&i.DomEvent.preventDefault(p);for(var f=!1,m=0;m<r.length;m++)if(r[m].pointerId===p.pointerId){f=!0;break}f||r.push(p),p.touches=r.slice(),p.changedTouches=[p],n(p)};if(t["_leaflet_touchstart"+o]=h,t.addEventListener(this.POINTER_DOWN,h,!1),!this._pointerDocumentListener){var u=function(p){for(var f=0;f<r.length;f++)if(r[f].pointerId===p.pointerId){r.splice(f,1);break}};g.documentElement.addEventListener(this.POINTER_UP,u,!1),g.documentElement.addEventListener(this.POINTER_CANCEL,u,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,o){var r=this._pointers;function h(u){if(u.pointerType!==u.MSPOINTER_TYPE_MOUSE&&"mouse"!==u.pointerType||0!==u.buttons){for(var p=0;p<r.length;p++)if(r[p].pointerId===u.pointerId){r[p]=u;break}u.touches=r.slice(),u.changedTouches=[u],n(u)}}return t["_leaflet_touchmove"+o]=h,t.addEventListener(this.POINTER_MOVE,h,!1),this},addPointerListenerEnd:function(t,e,n,o){var r=this._pointers,h=function(u){for(var p=0;p<r.length;p++)if(r[p].pointerId===u.pointerId){r.splice(p,1);break}u.touches=r.slice(),u.changedTouches=[u],n(u)};return t["_leaflet_touchend"+o]=h,t.addEventListener(this.POINTER_UP,h,!1),t.addEventListener(this.POINTER_CANCEL,h,!1),this},removePointerListener:function(t,e,n){var a=t["_leaflet_"+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,a,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,a,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,a,!1),t.removeEventListener(this.POINTER_CANCEL,a,!1)}return this}}),i.Map.mergeOptions({touchZoom:i.Browser.touch&&!i.Browser.android23,bounceAtZoomLimits:!0}),i.Map.TouchZoom=i.Handler.extend({addHooks:function(){i.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){i.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]),a=e._getCenterLayerPoint();this._startCenter=n.add(o)._divideBy(2),this._startDist=n.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),i.DomEvent.on(g,"touchmove",this._onTouchMove,this).on(g,"touchend",this._onTouchEnd,this),i.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(o)/this._startDist,this._delta=n._add(o)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1)||(this._moved||(i.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),i.Util.cancelAnimFrame(this._animRequest),this._animRequest=i.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),i.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),o=t.getScaleZoom(this._scale);t._animateZoom(n,o,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,i.DomUtil.removeClass(t._mapPane,"leaflet-touching"),i.Util.cancelAnimFrame(this._animRequest),i.DomEvent.off(g,"touchmove",this._onTouchMove).off(g,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),o=t.getZoom(),a=t.getScaleZoom(this._scale)-o,r=a>0?Math.ceil(a):Math.floor(a),h=t._limitZoom(o+r),u=t.getZoomScale(h)/this._scale;t._animateZoom(n,h,e,u)}else this._zooming=!1},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),i.Map.addInitHook("addHandler","touchZoom",i.Map.TouchZoom),i.Map.mergeOptions({tap:!0,tapTolerance:15}),i.Map.Tap=i.Handler.extend({addHooks:function(){i.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){i.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(i.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new i.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&i.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(i.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),i.DomEvent.on(g,"touchmove",this._onMove,this).on(g,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),i.DomEvent.off(g,"touchmove",this._onMove,this).off(g,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&i.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new i.Point(e.clientX,e.clientY)},_simulateEvent:function(t,e){var n=g.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,l,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),i.Browser.touch&&!i.Browser.pointer&&i.Map.addInitHook("addHandler","tap",i.Map.Tap),i.Map.mergeOptions({boxZoom:!0}),i.Map.BoxZoom=i.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){i.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){i.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){if(this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button)return!1;i.DomUtil.disableTextSelection(),i.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),i.DomEvent.on(g,"mousemove",this._onMouseMove,this).on(g,"mouseup",this._onMouseUp,this).on(g,"keydown",this._onKeyDown,this)},_onMouseMove:function(t){this._moved||(this._box=i.DomUtil.create("div","leaflet-zoom-box",this._pane),i.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,o=this._map.mouseEventToLayerPoint(t),a=o.subtract(e),r=new i.Point(Math.min(o.x,e.x),Math.min(o.y,e.y));i.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(a.x)-4)+"px",n.style.height=Math.max(0,Math.abs(a.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),i.DomUtil.enableTextSelection(),i.DomUtil.enableImageDrag(),i.DomEvent.off(g,"mousemove",this._onMouseMove).off(g,"mouseup",this._onMouseUp).off(g,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var o=new i.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(o),e.fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),i.Map.addInitHook("addHandler","boxZoom",i.Map.BoxZoom),i.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),i.Map.Keyboard=i.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),i.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;i.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var t=g.body,e=g.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),l.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var o,a,e=this._panKeys={},n=this.keyCodes;for(o=0,a=n.left.length;o<a;o++)e[n.left[o]]=[-1*t,0];for(o=0,a=n.right.length;o<a;o++)e[n.right[o]]=[t,0];for(o=0,a=n.down.length;o<a;o++)e[n.down[o]]=[0,t];for(o=0,a=n.up.length;o<a;o++)e[n.up[o]]=[0,-1*t]},_setZoomOffset:function(t){var o,a,e=this._zoomKeys={},n=this.keyCodes;for(o=0,a=n.zoomIn.length;o<a;o++)e[n.zoomIn[o]]=t;for(o=0,a=n.zoomOut.length;o<a;o++)e[n.zoomOut[o]]=-t},_addHooks:function(){i.DomEvent.on(g,"keydown",this._onKeyDown,this)},_removeHooks:function(){i.DomEvent.off(g,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}i.DomEvent.stop(t)}}),i.Map.addInitHook("addHandler","keyboard",i.Map.Keyboard),i.Handler.MarkerDrag=i.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new i.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),i.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),i.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=i.DomUtil.getPosition(t._icon),o=t._map.layerPointToLatLng(n);e&&i.DomUtil.setPosition(e,n),t._latlng=o,t.fire("move",{latlng:o}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),i.Control=i.Class.extend({options:{position:"topright"},initialize:function(t){i.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return i.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),i.control=function(t){return new i.Control(t)},i.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=i.DomUtil.create("div",e+"control-container",this._container);function o(a,r){t[a+r]=i.DomUtil.create("div",e+a+" "+e+r,n)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),i.Control.Zoom=i.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=i.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,o,a,r){var h=i.DomUtil.create("a",n,o);h.innerHTML=t,h.href="#",h.title=e;var u=i.DomEvent.stopPropagation;return i.DomEvent.on(h,"click",u).on(h,"mousedown",u).on(h,"dblclick",u).on(h,"click",i.DomEvent.preventDefault).on(h,"click",a,r).on(h,"click",this._refocusOnMap,r),h},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";i.DomUtil.removeClass(this._zoomInButton,e),i.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&i.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&i.DomUtil.addClass(this._zoomInButton,e)}}),i.Map.mergeOptions({zoomControl:!0}),i.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new i.Control.Zoom,this.addControl(this.zoomControl))}),i.control.zoom=function(t){return new i.Control.Zoom(t)},i.Control.Attribution=i.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){i.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in this._container=i.DomUtil.create("div","leaflet-control-attribution"),i.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),i.Map.mergeOptions({attributionControl:!0}),i.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new i.Control.Attribution).addTo(this))}),i.control.attribution=function(t){return new i.Control.Attribution(t)},i.Control.Scale=i.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=i.DomUtil.create("div",e),o=this.options;return this._addScales(o,e,n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=i.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=i.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,o=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,a=this._map.getSize(),r=this.options,h=0;a.x>0&&(h=o*(r.maxWidth/a.x)),this._updateScales(r,h)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var o,a,r,e=3.2808399*t,n=this._iScale;e>5280?(a=this._getRoundNum(o=e/5280),n.style.width=this._getScaleWidth(a/o)+"px",n.innerHTML=a+" mi"):(r=this._getRoundNum(e),n.style.width=this._getScaleWidth(r/e)+"px",n.innerHTML=r+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),i.control.scale=function(t){return new i.Control.Scale(t)},i.Control.Layers=i.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){for(var o in i.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=i.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=i.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),i.Browser.touch?i.DomEvent.on(e,"click",i.DomEvent.stopPropagation):i.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=i.DomUtil.create("form",t+"-list");if(this.options.collapsed){i.Browser.android||i.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var o=this._layersLink=i.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",i.Browser.touch?i.DomEvent.on(o,"click",i.DomEvent.stop).on(o,"click",this._expand,this):i.DomEvent.on(o,"focus",this._expand,this),i.DomEvent.on(n,"click",function(){setTimeout(i.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=i.DomUtil.create("div",t+"-base",n),this._separator=i.DomUtil.create("div",t+"-separator",n),this._overlaysList=i.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var o=i.stamp(t);this._layers[o]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var n,o,t=!1,e=!1;for(n in this._layers)this._addItem(o=this._layers[n]),e=e||o.overlay,t=t||!o.overlay;this._separator.style.display=e&&t?"":"none"}},_onLayerChange:function(t){var e=this._layers[i.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(n+=' checked="checked"'),n+="/>";var o=g.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var n,e=g.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((n=g.createElement("input")).type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=o):n=this._createRadioElement("leaflet-base-layers",o),n.layerId=i.stamp(t.layer),i.DomEvent.on(n,"click",this._onInputClick,this);var a=g.createElement("span");return a.innerHTML=" "+t.name,e.appendChild(n),e.appendChild(a),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),e},_onInputClick:function(){var t,e,n,o=this._form.getElementsByTagName("input"),a=o.length;for(this._handlingClick=!0,t=0;t<a;t++)n=this._layers[(e=o[t]).layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){i.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),i.control.layers=function(t,e,n){return new i.Control.Layers(t,e,n)},i.PosAnimation=i.Class.extend({includes:i.Mixin.Events,run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[i.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(o||.5)+",1)",i.DomEvent.on(t,i.DomUtil.TRANSITION_END,this._onTransitionEnd,this),i.DomUtil.setPosition(t,e),i.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(i.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(i.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),i.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();t?(this._el._leaflet_pos=t,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,e,n,a=l.getComputedStyle(this._el);if(i.Browser.any3d){if(!(n=a[i.DomUtil.TRANSFORM].match(this._transformRe)))return;t=parseFloat(n[1]),e=parseFloat(n[2])}else t=parseFloat(a.left),e=parseFloat(a.top);return new i.Point(t,e,!0)},_onTransitionEnd:function(){i.DomEvent.off(this._el,i.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[i.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),i.Map.include({setView:function(t,e,n){return e=e===v?this._zoom:this._limitZoom(e),t=this._limitCenter(i.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&!0!==n&&(n.animate!==v&&(n.zoom=i.extend({animate:n.animate},n.zoom),n.pan=i.extend({animate:n.animate},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},panBy:function(t,e){if(e=e||{},!(t=i.point(t).round()).x&&!t.y)return this;if(this._panAnim||(this._panAnim=new i.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){i.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){i.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))}}),i.PosAnimation=i.DomUtil.TRANSITION?i.PosAnimation:i.PosAnimation.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=i.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=i.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));i.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){i.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),i.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),i.DomUtil.TRANSITION&&i.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&i.DomUtil.TRANSITION&&i.Browser.any3d&&!i.Browser.android23&&!i.Browser.mobileOpera,this._zoomAnimated&&i.DomEvent.on(this._mapPane,i.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),i.Map.include(i.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/o),r=this._getCenterLayerPoint()._add(a);return!(!0!==n.animate&&!this.getSize().contains(a)||(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,o,null,!0),0))},_animateZoom:function(t,e,n,o,a,r,h){h||(this._animatingZoom=!0),i.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,i.Draggable&&(i.Draggable._disabled=!0),i.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:o,delta:a,backwards:r}),setTimeout(i.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,i.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),i.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),i.Draggable&&(i.Draggable._disabled=!1)},this))}}:{}),i.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=i.DomUtil.TRANSFORM,o=t.delta?i.DomUtil.getTranslateString(t.delta):e.style[n],a=i.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?a+" "+o:o+" "+a},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),i.Util.falseFn(e.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;t&&!t._animatingZoom&&!t.touchZoom._zooming&&(this._bgBuffer.innerHTML="",this._bgBuffer.style[i.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),o=this._getLoadedTilesPercentage(t);if(e&&n>.5&&o<.5)return t.style.visibility="hidden",void this._stopLoadingImages(t);e.style.visibility="hidden",e.style[i.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(t){var n,o,e=t.getElementsByTagName("img"),a=0;for(n=0,o=e.length;n<o;n++)e[n].complete&&a++;return a/o},_stopLoadingImages:function(t){var n,o,a,e=Array.prototype.slice.call(t.getElementsByTagName("img"));for(n=0,o=e.length;n<o;n++)(a=e[n]).complete||(a.onload=i.Util.falseFn,a.onerror=i.Util.falseFn,a.src=i.Util.emptyImageUrl,a.parentNode.removeChild(a))}}),i.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=i.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i.bind(this._handleGeolocationResponse,this),n=i.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,o=new i.LatLng(e,n),a=180*t.coords.accuracy/40075017,r=a/Math.cos(i.LatLng.DEG_TO_RAD*e),h=i.latLngBounds([e-a,n-r],[e+a,n+r]),u=this._locateOptions;if(u.setView){var p=Math.min(this.getBoundsZoom(h),u.maxZoom);this.setView(o,p)}var f={latlng:o,bounds:h,timestamp:t.timestamp};for(var m in t.coords)"number"==typeof t.coords[m]&&(f[m]=t.coords[m]);this.fire("locationfound",f)}})}(window,document)}}]);